<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.itfllc.WebSystemSamples.mappers.TodosMapper">
    <select id="selectByAssigneeId" resultType="TodosResult">
        SELECT
            t.*,
            au.name AS creator,
            cu.name AS assignee
        FROM
            todos t
        INNER JOIN
            users cu
        ON
            t.creator_id = cu.id
        INNER JOIN
            users au
        ON
            t.assignee_id = au.id
        WHERE
            t.assignee_id = #{assigneeId}::uuid;
    </select>
</mapper>
